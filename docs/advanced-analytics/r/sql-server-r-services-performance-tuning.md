---
title: SQL Server R Services 성능 튜닝-SQL Server Machine Learning 서비스
ms.prod: sql
ms.technology: machine-learning
ms.date: 04/15/2018
ms.topic: conceptual
author: dphansen
ms.author: davidph
ms.openlocfilehash: bb3f48a9a25b12568497c3583536d8c650a6f702
ms.sourcegitcommit: b2464064c0566590e486a3aafae6d67ce2645cef
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 07/15/2019
ms.locfileid: "67962437"
---
# <a name="performance-tuning-for-r-in-sql-server"></a>SQL Server에서 R의 성능 튜닝
[!INCLUDE[appliesto-ss-xxxx-xxxx-xxx-md-winonly](../../includes/appliesto-ss-xxxx-xxxx-xxx-md-winonly.md)]

이 문서는 두 가지 사용 사례에 따라 R 서비스에 대 한 성능 최적화를 설명 하는 4 문서 시리즈의 첫 번째.

- R 솔루션의 성능 프로필 유효성을 검사 하려면 제품 개발 팀에서 수행 된 성능 테스트

- 고객이 자주 요청 된 특정 기계 학습 시나리오에 대 한 Microsoft 데이터 과학 팀에서 성능 최적화.

이 시리즈의 목표는 유형의 성능 튜닝 하는 SQL Server에서 R 작업을 실행 하기 위한 가장 유용한 기술에 대 한 지침을 제공 하는 것입니다.

+ (첫 번째)이 항목에서는 데이터 과학 작업에 최적화 하는 경우 몇 가지 일반적인 문제 및 아키텍처 개요를 제공 합니다.
+ 두 번째 기사에서는 특정 하드웨어와 SQL Server 최적화에 설명 합니다.
+ 세 번째 기사에서는 R 코드 운영 화에 대 한 리소스에 대 한 최적화를 설명합니다.
+ 네 번째 기사에는 세부 정보 및 보고서 결과 결론 테스트 방법을 설명합니다.

**적용 대상:** SQL Server 2016 R Services, SQL Server 2017 Machine Learning 서비스

## <a name="performance-goals-and-targeted-scenarios"></a>성능 목표 및 대상된 시나리오

R Services 기능 SQL Server에서 R 스크립트 실행을 지 원하는 SQL Server 2016에서 도입 되었습니다. 이 기능을 사용 하는 경우 R 런타임과 별도 데이터베이스 엔진 프로세스에서 작동 하지만 신뢰할 수 있는 실행 패드와 같은 SQL Server를 사용 하 여 서버 리소스와 상호 작용 하는 서비스를 사용 하 여 데이터베이스 엔진을 사용 하 여 데이터를 안전 하 게 교환 합니다.

SQL Server 2017에서 동일한 아키텍처를 사용 하 여 나중에 따라 추가 언어를 사용 하 여 Python 스크립트를 실행 하는 것에 대 한 지원을 발표 되었습니다.

지원 되는 버전 및 언어 수가 증가 함에 따라 반드시 데이터베이스 관리자 및 데이터베이스 설계자는 machine learning 작업으로 인해 리소스 경합 가능성을 인식 하 고 지원 하도록 서버를 구성할 수는 새 워크 로드입니다. 보관 데이터에 근접 한 분석은 안전 하지 않은 데이터 이동을 제거 하지만 또한 데이터 과학자 및 데이터를 호스팅하는 서버에 다시 랩톱 분석 워크 로드를 이동 합니다.

Machine learning 위한 성능 최적화는 명확 하 게는 모든 상황에 맞는 합니다. 다음과 같은 일반적인 작업에는 매우 다른 성능 프로필 있을 수 있습니다.

- 학습 작업: 만들기 및 신경망을 교육 및 회귀 모델 학습
- T-SQL을 사용 하 여 기능 추출 및 R을 사용 하 여 기능 엔지니어링
- 단일 행 또는 테이블 형식 입력을 사용 하 여 점수 매기기 대량 및 작은 일괄 처리 점수 매기기
- R에서 저장된 프로시저에서 SQL Server에서 프로덕션으로 모델을 배포 및 점수 매기기 실행
- 데이터 전송을 최소화 하거나 비용이 많이 드는 데이터 변환을 제거 하는 R 코드를 수정 합니다.
- 자동화 된 테스트 및 모델 재 학습을 사용 하도록 설정

응용 프로그램 또는 사용 사례에 대 한 중요 한 작업에 따라 최적화 기술 선택, 때문에 사례 연구 일반 성능 팁 및 특정 시나리오에 일괄 처리 점수 매기기에 대 한 최적화에 대 한 최적화 하는 방법에 대 한 지침을 설명 합니다.

+ **SQL Server의 개별 최적화 옵션**

    첫 번째 성능 사례 연구, 여러 테스트 된 단일 유형의 모델을 사용 하 여 단일 데이터 집합에서 실행 됩니다. RevoscaleR의 rxLinMod 알고리즘에서 점수를 만들고 모델을 작성 사용 했지만 기본 데이터 테이블 뿐만 아니라 코드를 체계적으로 각 변경의 영향을 테스트 하려면 변경 된.

    예를 들어, 하나의 테스트 실행, R 코드를 비교 기능을 미리 계산 하 고 다음 테이블에서 기능을 로드 및 변환 함수를 사용 하 여 기능 엔지니어링 간에 설정 될 수 있도록 변경 되었습니다. 다른 테스트 실행에서 간의 다양 한 압축 또는 새 인덱스 형식을 사용 하 여 테이블에는 표준 인덱싱된 테이블 및 데이터를 사용 하 여 모델 학습 성능을 비교할 합니다.

+ **특정 고용량 점수 매기기 시나리오에 대 한 최적화**

    두 번째 사례 연구에서 기계 학습 작업 각각의 작업 위치에 대 한 가장 적합 한 후보를 찾아 여러 위치에 대해 제출 된 여러 다시 시작을 처리 해야 합니다. 기계 학습 모델 자체를 작성 하는 이진 분류 문제로: 입력으로 다시 시작 및 작업 설명을 사용 하 고 각 다시 시작 작업 쌍에 대 한 확률을 생성 합니다. 가장 일치 하는 찾으려는 목표 이기 때문에 사용자 정의 확률 임계값을 추가로 필터링 하 고 방금 적절 한 일치 항목을 가져오기에 사용 됩니다.

    이 솔루션에 대 한 주요 목표는 점수 매기기 중 짧은 대기 시간을 달성 하기 위해 했습니다. 그러나이 작업은 각 새 작업을 적절 한 시간 프레임 내에서 다시 시작 수백만 일치 해야 하기 때문에 점수 매기기 프로세스 중에 비용이 많이 드는 계산 합니다. 또한 기능 엔지니어링 단계 다시 시작 또는 작업에 따른 2000 개 기능을 생성 및 심각한 성능 병목 상태가 있습니다.

솔루션에 적용 되는 기술을 확인 하는 첫 번째 사례 연구에서 모든 결과 검토 하 고 잠재적 영향을 평가 하는 것이 좋습니다.

그런 다음 작성자 다양 한 기법을 적용 하 고 특정 워크 로드를 지원 하도록 서버를 최적화 하는 방법을 확인 하려면 점수 매기기 최적화 사례 연구 결과 검토 합니다.

## <a name="performance-optimization-process"></a>성능 최적화 프로세스

구성 및 성능 튜닝 하려면 특정 워크 로드를 위한 계층 최적화를 탄탄을 만들어야 합니다.

- 적절 한 호스트 분석 서버를 선택 합니다. 일반적으로 보조 보고, 데이터 웨어하우스 또는 다른 보고 또는 분석에 이미 사용 되는 다른 서버는 것이 좋습니다. 그러나 하이브리드 분석 트랜잭션 처리 (HTAP) 솔루션을 운영 데이터 사용할 수 R에 대 한 입력으로 빠른 점수 매기기에 대 한 합니다.

- SQL Server 인스턴스를 구성 합니다 분산 데이터베이스 엔진 작업과 R 또는 Python 스크립트를 적절 한 수준에서 실행. 메모리 및 CPU 사용량, NUMA 및 프로세서 선호도 설정 및 리소스 그룹 만들기에 대 한 SQL Server 기본값을 변경 포함할 수 있습니다.

- 외부 스크립트의 효율적인 사용을 지원 하려면 서버 컴퓨터를 최적화 합니다. 패키지 관리를 사용 하도록 설정 하 고 외부 스크립트 실행을 위해 사용 되는 계정의 수를 늘리면 포함할 수 있습니다 및 관련 된 보안 역할에 사용자를 할당 합니다.

- 데이터 저장소 및 SQL Server, 인덱싱 등 및 통계 전략, 쿼리 디자인 및 쿼리를 최적화 및 기계 학습에 사용 되는 테이블의 디자인에서 전송 특정 최적화를 적용 합니다. 데이터 소스를 분석할 수도 있습니다 및 데이터 전송 메서드 또는 기능 추출을 최적화 하기 위해 ETL 프로세스를 수정 합니다.

- 비효율성을 방지 하려면 분석 모델을 조정 합니다. 최적화를 사용할 수 있는 범위의 R 코드 패키지 및 사용 하는 데이터의 복잡성에 따라 달라 집니다. 키 작업에는 비용이 많이 드는 데이터 변환을 제거 하거나 데이터 준비 단계 또는 기능 엔지니어링의 작업 오프 로딩 R 또는 Python ETL 프로세스 또는 SQL이 포함 됩니다. 수도 스크립트 리팩터링, 인라인 패키지 설치를 제거, 학습, 점수 매기기 및 평가 대 한 별도 프로시저에 R 코드를 나눌 또는 저장 프로시저로 효율적으로 사용 하도록 코드를 단순화 합니다.

## <a name="articles-in-this-series"></a>이 시리즈의 기사

+ [SQL Server-하드웨어에서에서 R의 성능 튜닝](../r/sql-server-configuration-r-services.md)

    하드웨어 구성에 대 한 지침을 제공 하는 [!INCLUDE[ssNoVersion_md](../../includes/ssnoversion-md.md)] 및 외부 스크립트를 더 잘 지원 하도록 SQL Server 인스턴스를 구성 하는 것에 대 한 설치 됩니다. 에 특히 유용 **데이터베이스 관리자가**합니다.

+ [SQL Server-코드 및 데이터에에서 R의 성능 튜닝 최적화](../r/r-and-data-optimization-r-services.md)

    알려진된 문제를 방지 하려면 외부 스크립트를 최적화 하는 방법에 대 한 특정 팁을 제공 합니다. 에 가장 유용 **과학자**합니다.

    > [!NOTE]
    > R 일반적 적용이 섹션의 정보를 많이 하는 동안 일부 정보는 RevoScaleR analytic 함수를 다릅니다. 자세한 성능 지침을 사용할 수 없는 **revoscalepy** 다른 Python 라이브러리를 지원 합니다.
    >

+ [SQL Server-메서드 및 결과에 R의 성능 튜닝](../r/performance-case-study-r-services.md)

    요약 데이터 사용한 두 사례 연구, 성능 테스트 된 방법 및 최적화 결과 적용 하는 방법입니다.
