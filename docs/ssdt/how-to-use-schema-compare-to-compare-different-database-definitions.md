---
title: '방법: 스키마 비교를 사용하여 서로 다른 데이터베이스 정의 비교 | Microsoft Docs'
ms.custom:
- SSDT
ms.date: 02/09/2017
ms.prod: sql
ms.technology: ssdt
ms.reviewer: ''
ms.topic: conceptual
f1_keywords:
- sql.data.tools.schemacompare.SchemaCompareOptionsDialog
- sql.data.tools.schemacompare.watermark.f1
- sql.data.tools.schemacompare.f1
- sql.data.tools.schemacompare.connectiondialog.f1
- sql.data.tools.schemacompare.connectiondialog.error.f1
ms.assetid: 7f0905a4-081c-46e2-bd7d-325b63e5c675
author: markingmyname
ms.author: maghan
ms.openlocfilehash: ce83808ac5953902f8f655c619f87feeffa4e8c6
ms.sourcegitcommit: b2464064c0566590e486a3aafae6d67ce2645cef
ms.translationtype: HT
ms.contentlocale: ko-KR
ms.lasthandoff: 07/15/2019
ms.locfileid: "68097511"
---
# <a name="how-to-use-schema-compare-to-compare-different-database-definitions"></a>방법: 스키마 비교를 사용하여 서로 다른 데이터베이스 정의 비교
SSDT(SQL Server Data Tools)에는 두 데이터베이스 정의를 비교하는 데 사용할 수 있는 스키마 비교 유틸리티가 포함되어 있습니다.  비교의 원본 및 대상으로는 연결된 데이터베이스, SQL Server 데이터베이스 프로젝트, 스냅샷 또는 .dacpac 파일의 임의 조합을 사용할 수 있습니다.  비교 결과는 대상을 원본과 동일하게 만들기 위해 수행해야 하는 일련의 작업으로 표시됩니다.  비교가 완료되면 대상을 직접 업데이트하거나(대상이 프로젝트 또는 데이터베이스인 경우) 같은 효과가 있는 업데이트 스크립트를 생성할 수 있습니다.  
  
원본과 대상의 차이는 검토하기 쉽게 표로 표시됩니다.  결과 표를 통해서나 스크립트 형태로 각 차이를 자세히 보고 검토할 수 있습니다.  그런 다음 특정 차이를 선택적으로 제외할 수 있습니다.  
  
비교 내용을 SQL Server 데이터베이스 프로젝트의 일부나 독립 실행형 파일로 저장할 수 있습니다.  비교 범위 및 업데이트 측면을 제어하는 옵션을 설정할 수도 있습니다.  그런 다음 해당 비교를 저장하여 나중에 동일한 비교를 쉽게 반복하거나 새 비교의 시작점으로 사용할 수 있습니다.  
  
다음 절차에서는 데이터베이스 프로젝트의 스키마와 연결된 데이터베이스의 스키마를 비교합니다.  
  
> [!WARNING]  
> 비교할 대상으로 프로젝트를 지정할 경우 프로젝트에 대해 지원되는 최대 경로 길이(드라이브 문자, 콜론 및 선행 백슬래시 제외)는 256자입니다. 프로젝트 경로가 256자를 초과하더라도 해당 스키마를 데이터베이스 또는 다른 프로젝트와 비교할 수 있습니다. 그러나 스키마를 업데이트할 수는 없습니다.  
  
> [!WARNING]  
> 다음 절차에서는 [연결된 데이터베이스 개발](../ssdt/connected-database-development.md) 및 [프로젝트 기반 오프라인 데이터베이스 개발](../ssdt/project-oriented-offline-database-development.md) 섹션의 이전 절차에서 만들어진 엔터티를 활용합니다.  
  
### <a name="to-compare-database-definitions"></a>데이터베이스 정의를 비교하려면  
  
1.  **SQL** 메뉴에서 **스키마 비교**를 선택하고 **새 스키마 비교**를 클릭합니다.  
  
    또는 **솔루션 탐색기**에서 **TradeDev** 프로젝트를 마우스 오른쪽 단추로 클릭하고 **스키마 비교**를 선택합니다.  
  
    **스키마 비교** 창이 열리며, Visual Studio에서는 이 창에 `SqlSchemaCompare1`과 같은 이름을 자동으로 할당합니다.  
  
    녹색 화살표가 사이에 있는 두 개의 드롭다운 메뉴가 **스키마 비교** 창 도구 모음 바로 아래에 표시됩니다. 이 메뉴를 통해 비교 원본 및 대상의 데이터베이스 정의를 선택할 수 있습니다.  
  
2.  **원본 선택** 드롭다운에서 **원본 선택**을 선택하면 **원본 스키마 선택** 대화 상자가 열립니다.  
  
    프로젝트 이름을 마우스 오른쪽 단추로 클릭하여 **스키마 비교** 창을 연 경우에는 원본 스키마가 이미 채워져 있으므로 4단계로 진행할 수 있습니다.  
  
3.  **프로젝트** 라디오 단추를 선택한 후 앞의 절차에서 만든 **TradeDev** 데이터베이스 프로젝트를 선택합니다.  
  
4.  **스키마 비교 창**의 **대상 선택** 드롭다운에서 **대상 선택**을 선택하면 **대상 스키마 선택** 대화 상자가 열립니다. **스키마** 섹션에서 **데이터베이스** 라디오 단추를 클릭한 후 **새 연결** 단추를 클릭합니다.  
  
5.  **연결 속성** 대화 상자에서 `TradeDev` 데이터베이스가 있는 서버 이름을 입력하고 올바른 인증 자격 증명이 제공되었는지 확인합니다. 그런 다음, **데이터베이스에 연결**에서 **TradeDev**를 선택하고 **확인**을 클릭합니다.  
  
    **스키마 비교 창** 도구 모음에서 **옵션** 단추를 클릭하여 비교할 개체, 무시할 차이 유형 및 기타 설정을 지정할 수도 있습니다.  
  
6.  **스키마 비교 창** 도구 모음의 **비교** 단추를 클릭하여 비교 프로세스를 시작합니다.  
  
    비교가 완료되면 프로젝트와 데이터베이스 간의 구조적 차이가 창의 위쪽 부분에 있는 **결과** 창에 나타납니다. 기본적으로 비교 결과에서는 모든 차이가 삭제, 변경 또는 추가와 같은 작업별로 그룹화됩니다. **결과** 창에는 데이터베이스 정의 간에 차이가 있는 각 데이터베이스 개체에 대한 행이 표시됩니다. 각 행은 원본 또는 대상 스키마(또는 둘 다)의 개체 및 대상 개체를 원본 개체와 동일하게 만들기 위해 대상 스키마에서 수행할 작업을 식별합니다.  개체가 리팩터링되었고 새 스키마로 이름이 바뀌거나 이동된 경우 원본과 대상 이름이 다르므로 이러한 차이를 강조하기 위해 원본 이름이 굵게 표시됩니다.  
  
    기본적으로 결과 목록에서는 두 스키마에서 동일하거나 업데이트가 지원되지 않는 개체(예: 기본 제공 개체)가 숨겨집니다.  도구 모음에 있는 해당 필터 단추를 클릭하여 이러한 개체를 표시할 수 있습니다.  
  
    그룹화 기본 설정을 변경하려면 도구 모음에서 **그룹 결과** 드롭다운 목록을 클릭합니다.  테이블, 뷰 또는 저장 프로시저와 같은 개체 유형으로 결과를 그룹화하려면 **유형**을 선택합니다.  
  
7.  `Products` 그룹에서 `Tables` 테이블을 찾습니다. 행을 클릭하면 **개체 정의** 창에 차이가 강조 표시된 테이블의 원본 및 대상 정의가 나타납니다. **결과** 창에서 `Products` 테이블 행을 확장하여 테이블에서 차이가 있는 특정 요소를 검사할 수도 있습니다.  
  
8.  기본적으로 모든 차이는 대상 업데이트 동작 범위에 포함됩니다. 동기화하지 않으려는 차이는 제외할 수 있습니다. 차이를 제외하려면 각 행의 가운데에 있는 **동작** 열의 선택을 취소합니다. 또는 스키마 창에서 행을 마우스 오른쪽 단추로 클릭하고 **제외**를 선택합니다. 그러면 해당 행이 즉시 회색으로 표시됩니다. 대상 데이터베이스를 업데이트할 때 이 행은 보류 중인 변경 내용으로 간주되지 않습니다.  
  
    그룹 행을 마우스 오른쪽 단추로 클릭하여 **모두 제외** 또는 **모두 포함**을 선택하면 해당 그룹의 모든 차이를 선택하거나 모든 차이의 선택을 취소할 수 있습니다. 결과를 스키마로 그룹화하는 경우 이 기능을 사용하여 손쉽게 특정 스키마에 대한 모든 변경 내용을 포함하거나 제외할 수 있습니다.  
  
    > [!WARNING]  
    > 제외되는 행에 종속 개체(예: **뷰** 행에서 참조하는 **테이블** 행)가 있는 경우 제외된 행은 비활성화되지만 해당 확인란의 선택은 취소되지 않습니다. 종속된 모든 행의 선택이 취소되면 비활성화된 행의 선택도 취소됩니다. 또한 이름이 바뀌거나 다른 스키마로 이동되는 등 행이 리팩터링될 경우 해당 행 및 모든 종속된 자식 행의 확인란이 비활성화됩니다.  
    >   
    > 비교를 새로 고치면 건너뛰도록 선택한 차이는 무시됩니다.  
  
대상의 스키마를 업데이트하는 방법에는 두 가지가 있습니다. 대상이 데이터베이스 또는 프로젝트이면 **스키마 비교** 창에서 대상을 직접 업데이트할 수 있고 대상이 데이터베이스 또는 데이터베이스 파일이면 업데이트 스크립트를 생성할 수 있습니다.  생성된 스크립트는 Transact\-SQL 편집기에 표시되며 여기에서 스크립트를 검사하고 데이터베이스에 대해 실행할 수 있습니다. 다음 절차에서는 이러한 옵션에 대해 더 자세하게 설명합니다.  
  
> [!WARNING]  
> 열을 NOT NULL에서 NULL로 변경하고 따라서 데이터 손실을 유발하는 변경 내용이 있으므로 업데이트가 실패합니다. 업데이트를 계속하려면 스키마 비교의 도구 모음에서 **옵션** 단추(왼쪽에서 다섯 번째 단추)를 클릭하고 **데이터가 손실되면 증분 배포 차단** 옵션의 선택을 취소합니다.  
  
### <a name="to-update-directly-in-the-schema-compare-window"></a>스키마 비교 창에서 직접 업데이트하려면  
  
1.  [스키마 비교] 창의 도구 모음에서 **업데이트** 단추를 클릭합니다.  
  
2.  생성된 변경 스크립트를 검사합니다. 파일/새로 만들기 메뉴를 사용하여 스크립트를 저장할 수 있습니다. 이렇게 하면 프로덕션 데이터베이스를 업데이트할 수 있는 권한이 없더라도 나중에 배포할 수 있도록 DBA에게 스크립트를 제공할 수 있으므로 유용합니다.  
  
3.  데이터베이스를 업데이트할 수 있는 권한이 있는 경우 편집 창 도구 모음의 **쿼리 실행** 단추를 클릭하여 스크립트를 실행합니다.  
  
### <a name="to-update-by-script"></a>스크립트별로 업데이트하려면  
  
1.  [스키마 비교] 창의 도구 모음에 있는 **스크립트 생성** 단추(왼쪽에서 네 번째 단추)를 클릭합니다.  
  
    생성된 스크립트가 새 Transact\-SQL 편집기 창에 표시됩니다.  
  
    > [!WARNING]  
    > SSDT 스냅샷 프로세스가 생성한 .dacpac 파일만 이 동작을 지원합니다.  이 경우 SQL DAC(데이터 계층 응용 프로그램) 도구 또는 프레임워크에 의해 생성된 .dacpac 파일은 대상으로 사용할 수 없습니다.  
  
2.  생성된 변경 스크립트를 검사합니다. **파일/저장** 또는 파일/다른 이름으로 저장 메뉴 명령을 사용하여 스크립트를 저장할 수 있습니다.  
  
    저장된 스크립트는 프로덕션 데이터베이스를 업데이트할 수 있는 권한이 없는 상황에서 유용하게 사용할 수 있습니다. 이 경우 나중에 배포에 사용할 수 있도록 이 스크립트를 DBA에게 전달할 수 있습니다.  
  
    또는 Transact\-SQL 편집기를 해당 서버에 연결하여 직접 스크립트를 실행할 수 있습니다. 이 절차를 수행하려면 데이터베이스를 만들거나 업데이트할 수 있는 권한이 있어야 합니다. 데이터베이스를 업데이트할 수 있는 권한이 있는 경우 편집 창 도구 모음의 **쿼리 실행** 단추를 클릭하여 스크립트를 실행합니다.  
  
3.  **연결** 단추를 클릭합니다. 이렇게 하면 현재 서버에 연결되거나, 서버에 연결 대화 상자에서 서버를 입력하거나 선택하게 됩니다.  데이터베이스 이름은 스크립트에 명령 변수로 정의됩니다.  
  
4.  스크립트를 검사하고 필요한 경우 대상 데이터베이스 이름, 관련 접두사 및 파일 경로를 정의하는 명령 변수를 변경합니다.  
  
5.  편집 창 도구 모음의 **실행** 단추를 클릭하여 스크립트를 실행합니다.  
  
